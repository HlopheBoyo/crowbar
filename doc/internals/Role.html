<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Role
  
    &mdash; Documentation by YARD 0.8.7.6
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!Role.html";
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (R)</a> &raquo;
    
    
    <span class="title">Role</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: Role
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">ActiveRecord::Base</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">ActiveRecord::Base</li>
          
            <li class="next">Role</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">rails/app/models/role.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Copyright 2014, Dell</p>

<p>Licensed under the Apache License, Version 2.0 (the “License”); you may not
use this file except in compliance with the License. You may obtain a copy
of the License at</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_http'>http</span><span class='symbol'>:/</span><span class='op'>/</span><span class='id identifier rubyid_www'>www</span><span class='period'>.</span><span class='id identifier rubyid_apache'>apache</span><span class='period'>.</span><span class='id identifier rubyid_org'>org</span><span class='op'>/</span><span class='id identifier rubyid_licenses'>licenses</span><span class='op'>/</span><span class='const'>LICENSE</span><span class='op'>-</span><span class='float'>2.0</span></code></pre>

<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an “AS IS” BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations
under the License.</p>


  </div>
</div>
<div class="tags">
  

</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="BarclampChef/Client.html" title="BarclampChef::Client (class)">BarclampChef::Client</a></span>, <span class='object_link'><a href="BarclampChef/Server.html" title="BarclampChef::Server (class)">BarclampChef::Server</a></span>, <span class='object_link'><a href="BarclampChef/Solo.html" title="BarclampChef::Solo (class)">BarclampChef::Solo</a></span>, <span class='object_link'><a href="BarclampConsul/Consul.html" title="BarclampConsul::Consul (class)">BarclampConsul::Consul</a></span>, <span class='object_link'><a href="BarclampDhcp/Database.html" title="BarclampDhcp::Database (class)">BarclampDhcp::Database</a></span>, <span class='object_link'><a href="BarclampDns/Client.html" title="BarclampDns::Client (class)">BarclampDns::Client</a></span>, <span class='object_link'><a href="BarclampDns/Database.html" title="BarclampDns::Database (class)">BarclampDns::Database</a></span>, <span class='object_link'><a href="BarclampDns/MgmtService.html" title="BarclampDns::MgmtService (class)">BarclampDns::MgmtService</a></span>, <span class='object_link'><a href="BarclampDns/MgmtShimCrowbarDns.html" title="BarclampDns::MgmtShimCrowbarDns (class)">BarclampDns::MgmtShimCrowbarDns</a></span>, <span class='object_link'><a href="BarclampDns/Server.html" title="BarclampDns::Server (class)">BarclampDns::Server</a></span>, <span class='object_link'><a href="BarclampNetwork/Lldpd.html" title="BarclampNetwork::Lldpd (class)">BarclampNetwork::Lldpd</a></span>, <span class='object_link'><a href="BarclampNetwork/Role.html" title="BarclampNetwork::Role (class)">BarclampNetwork::Role</a></span>, <span class='object_link'><a href="BarclampNetwork/Server.html" title="BarclampNetwork::Server (class)">BarclampNetwork::Server</a></span>, <span class='object_link'><a href="BarclampNtp/Server.html" title="BarclampNtp::Server (class)">BarclampNtp::Server</a></span>, <span class='object_link'><a href="BarclampProvisioner/BaseImages.html" title="BarclampProvisioner::BaseImages (class)">BarclampProvisioner::BaseImages</a></span>, <span class='object_link'><a href="BarclampProvisioner/Database.html" title="BarclampProvisioner::Database (class)">BarclampProvisioner::Database</a></span>, <span class='object_link'><a href="BarclampProvisioner/DockerSetup.html" title="BarclampProvisioner::DockerSetup (class)">BarclampProvisioner::DockerSetup</a></span>, <span class='object_link'><a href="BarclampProvisioner/OsInstall.html" title="BarclampProvisioner::OsInstall (class)">BarclampProvisioner::OsInstall</a></span>, <span class='object_link'><a href="BarclampProvisioner/Server.html" title="BarclampProvisioner::Server (class)">BarclampProvisioner::Server</a></span>, <span class='object_link'><a href="BarclampPuppet/AgentSa.html" title="BarclampPuppet::AgentSa (class)">BarclampPuppet::AgentSa</a></span>, <span class='object_link'><a href="BarclampSaltstack/Master.html" title="BarclampSaltstack::Master (class)">BarclampSaltstack::Master</a></span>, <span class='object_link'><a href="BarclampSaltstack/Minion.html" title="BarclampSaltstack::Minion (class)">BarclampSaltstack::Minion</a></span>, <span class='object_link'><a href="BarclampTest/Admin.html" title="BarclampTest::Admin (class)">BarclampTest::Admin</a></span>, <span class='object_link'><a href="BarclampTest/Async.html" title="BarclampTest::Async (class)">BarclampTest::Async</a></span>, <span class='object_link'><a href="BarclampTest/Client.html" title="BarclampTest::Client (class)">BarclampTest::Client</a></span>, <span class='object_link'><a href="BarclampTest/Discovery.html" title="BarclampTest::Discovery (class)">BarclampTest::Discovery</a></span>, <span class='object_link'><a href="BarclampTest/Event.html" title="BarclampTest::Event (class)">BarclampTest::Event</a></span>, <span class='object_link'><a href="BarclampTest/Role.html" title="BarclampTest::Role (class)">BarclampTest::Role</a></span>, <span class='object_link'><a href="BarclampTest/Server.html" title="BarclampTest::Server (class)">BarclampTest::Server</a></span>, <span class='object_link'><a href="Service.html" title="Service (class)">Service</a></span></p>
</div>
<h2>Defined Under Namespace</h2>
<p class="children">
  
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Role/CONFLICTS.html" title="Role::CONFLICTS (class)">CONFLICTS</a></span>, <span class='object_link'><a href="Role/MISSING_DEP.html" title="Role::MISSING_DEP (class)">MISSING_DEP</a></span>, <span class='object_link'><a href="Role/MISSING_JIG.html" title="Role::MISSING_JIG (class)">MISSING_JIG</a></span>
    
  
</p>







  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#%3C%3D%3E-instance_method" title="#&lt;=&gt; (instance method)">- (Object) <strong>&lt;=&gt;</strong>(other) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#active%3F-instance_method" title="#active? (instance method)">- (Boolean) <strong>active?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_to_deployment-instance_method" title="#add_to_deployment (instance method)">- (Object) <strong>add_to_deployment</strong>(dep) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Make sure there is a deployment role for ourself in the deployment.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_to_node-instance_method" title="#add_to_node (instance method)">- (Object) <strong>add_to_node</strong>(node) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_to_node_in_deployment-instance_method" title="#add_to_node_in_deployment (instance method)">- (Object) <strong>add_to_node_in_deployment</strong>(node, dep) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Bind a role to a node in a deployment.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#all_children-instance_method" title="#all_children (instance method)">- (Object) <strong>all_children</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#all_parents-instance_method" title="#all_parents (instance method)">- (Object) <strong>all_parents</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#depends_on%3F-instance_method" title="#depends_on? (instance method)">- (Boolean) <strong>depends_on?</strong>(other) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#github-instance_method" title="#github (instance method)">- (Object) <strong>github</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#jig-instance_method" title="#jig (instance method)">- (Object) <strong>jig</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#name_i18n-instance_method" title="#name_i18n (instance method)">- (Object) <strong>name_i18n</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#name_safe-instance_method" title="#name_safe (instance method)">- (Object) <strong>name_safe</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#noop%3F-instance_method" title="#noop? (instance method)">- (Boolean) <strong>noop?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#on_active-instance_method" title="#on_active (instance method)">- (Object) <strong>on_active</strong>(node_role, *args) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#on_blocked-instance_method" title="#on_blocked (instance method)">- (Object) <strong>on_blocked</strong>(node_role, *args) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#on_deployment_create-instance_method" title="#on_deployment_create (instance method)">- (Object) <strong>on_deployment_create</strong>(dr) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Event hook that is called whenever a new deployment role is bound to a
deployment.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#on_deployment_delete-instance_method" title="#on_deployment_delete (instance method)">- (Object) <strong>on_deployment_delete</strong>(dr) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Event hook that is called whenever a deployment role is deleted from a
deployment.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#on_error-instance_method" title="#on_error (instance method)">- (Object) <strong>on_error</strong>(node_role, *args) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>State Transistion Overrides.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#on_node_change-instance_method" title="#on_node_change (instance method)">- (Object) <strong>on_node_change</strong>(node) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Event hook that will be called every time a node is saved if any attributes
changed.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#on_node_create-instance_method" title="#on_node_create (instance method)">- (Object) <strong>on_node_create</strong>(node) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Event triggers for node creation and destruction.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#on_node_delete-instance_method" title="#on_node_delete (instance method)">- (Object) <strong>on_node_delete</strong>(node) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Event triggers for node creation and destruction.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#on_proposed-instance_method" title="#on_proposed (instance method)">- (Object) <strong>on_proposed</strong>(node_role, *args) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#on_todo-instance_method" title="#on_todo (instance method)">- (Object) <strong>on_todo</strong>(node_role, *args) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#on_transition-instance_method" title="#on_transition (instance method)">- (Object) <strong>on_transition</strong>(node_role, *args) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#template_update-instance_method" title="#template_update (instance method)">- (Object) <strong>template_update</strong>(val) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>incremental update (merges with existing).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unresolved_requires-instance_method" title="#unresolved_requires (instance method)">- (Object) <strong>unresolved_requires</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_cohort-instance_method" title="#update_cohort (instance method)">- (Object) <strong>update_cohort</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="<=>-instance_method">
  
    - (<tt>Object</tt>) <strong>&lt;=&gt;</strong>(other) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


201
202
203
204</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rails/app/models/role.rb', line 201</span>

<span class='kw'>def</span> <span class='op'>&lt;=&gt;</span><span class='lparen'>(</span><span class='id identifier rubyid_other'>other</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='int'>0</span> <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span> <span class='op'>==</span> <span class='id identifier rubyid_other'>other</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_cohort'>cohort</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_other'>other</span><span class='period'>.</span><span class='id identifier rubyid_cohort'>cohort</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="active?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>active?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


195
196
197
198
199</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rails/app/models/role.rb', line 195</span>

<span class='kw'>def</span> <span class='id identifier rubyid_active?'>active?</span>
  <span class='id identifier rubyid_j'>j</span> <span class='op'>=</span> <span class='id identifier rubyid_jig'>jig</span>
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='id identifier rubyid_j'>j</span>
  <span class='id identifier rubyid_j'>j</span><span class='period'>.</span><span class='id identifier rubyid_active'>active</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="add_to_deployment-instance_method">
  
    - (<tt>Object</tt>) <strong>add_to_deployment</strong>(dep) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Make sure there is a deployment role for ourself in the deployment.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


169
170
171
172
173</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rails/app/models/role.rb', line 169</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_to_deployment'>add_to_deployment</span><span class='lparen'>(</span><span class='id identifier rubyid_dep'>dep</span><span class='rparen'>)</span>
  <span class='const'>DeploymentRole</span><span class='period'>.</span><span class='id identifier rubyid_unsafe_locked_transaction'>unsafe_locked_transaction</span> <span class='kw'>do</span>
    <span class='const'>DeploymentRole</span><span class='period'>.</span><span class='id identifier rubyid_find_or_create_by!'>find_or_create_by!</span><span class='lparen'>(</span><span class='label'>role_id:</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='label'>deployment_id:</span> <span class='id identifier rubyid_dep'>dep</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="add_to_node-instance_method">
  
    - (<tt>Object</tt>) <strong>add_to_node</strong>(node) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


175
176
177</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rails/app/models/role.rb', line 175</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_to_node'>add_to_node</span><span class='lparen'>(</span><span class='id identifier rubyid_node'>node</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_add_to_node_in_deployment'>add_to_node_in_deployment</span><span class='lparen'>(</span><span class='id identifier rubyid_node'>node</span><span class='comma'>,</span><span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_deployment'>deployment</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="add_to_node_in_deployment-instance_method">
  
    - (<tt>Object</tt>) <strong>add_to_node_in_deployment</strong>(node, dep) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Bind a role to a node in a deployment.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


180
181
182
183
184
185
186
187
188
189
190</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rails/app/models/role.rb', line 180</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_to_node_in_deployment'>add_to_node_in_deployment</span><span class='lparen'>(</span><span class='id identifier rubyid_node'>node</span><span class='comma'>,</span><span class='id identifier rubyid_dep'>dep</span><span class='rparen'>)</span>
  <span class='const'>Role</span><span class='period'>.</span><span class='id identifier rubyid_transaction'>transaction</span> <span class='kw'>do</span>
    <span class='comment'># If we are already bound to this node in a deployment, do nothing.
</span>    <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='const'>NodeRole</span><span class='period'>.</span><span class='id identifier rubyid_find_by'>find_by</span><span class='lparen'>(</span><span class='label'>node_id:</span> <span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='label'>role_id:</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_res'>res</span> <span class='kw'>if</span> <span class='id identifier rubyid_res'>res</span>
  <span class='kw'>end</span>
  <span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Role: Trying to add </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> to </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='const'>NodeRole</span><span class='period'>.</span><span class='id identifier rubyid_safe_create!'>safe_create!</span><span class='lparen'>(</span><span class='label'>node_id:</span>       <span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span>
                        <span class='label'>role_id:</span>       <span class='id identifier rubyid_id'>id</span><span class='comma'>,</span>
                        <span class='label'>deployment_id:</span> <span class='id identifier rubyid_dep'>dep</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="all_children-instance_method">
  
    - (<tt>Object</tt>) <strong>all_children</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


65
66
67</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rails/app/models/role.rb', line 65</span>

<span class='kw'>def</span> <span class='id identifier rubyid_all_children'>all_children</span>
  <span class='const'>Role</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id in (select role_id from all_role_requires where required_role_id = ?)</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_order'>order</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cohort ASC</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="all_parents-instance_method">
  
    - (<tt>Object</tt>) <strong>all_parents</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


61
62
63</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rails/app/models/role.rb', line 61</span>

<span class='kw'>def</span> <span class='id identifier rubyid_all_parents'>all_parents</span>
  <span class='const'>Role</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id in (select required_role_id from all_role_requires where required_role_id IS NOT NULL AND role_id = ?)</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_order'>order</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cohort ASC</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="depends_on?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>depends_on?</strong>(other) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


164
165
166</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rails/app/models/role.rb', line 164</span>

<span class='kw'>def</span> <span class='id identifier rubyid_depends_on?'>depends_on?</span><span class='lparen'>(</span><span class='id identifier rubyid_other'>other</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_all_parents'>all_parents</span><span class='period'>.</span><span class='id identifier rubyid_exists?'>exists?</span><span class='lparen'>(</span><span class='id identifier rubyid_other'>other</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="github-instance_method">
  
    - (<tt>Object</tt>) <strong>github</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


144
145
146
147
148
149
150</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rails/app/models/role.rb', line 144</span>

<span class='kw'>def</span> <span class='id identifier rubyid_github'>github</span>
  <span class='id identifier rubyid_baseurl'>baseurl</span> <span class='op'>=</span> <span class='id identifier rubyid_barclamp'>barclamp</span><span class='period'>.</span><span class='id identifier rubyid_source_url'>source_url</span>
  <span class='id identifier rubyid_baseurl'>baseurl</span> <span class='op'>||=</span> <span class='id identifier rubyid_barclamp'>barclamp</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span><span class='period'>.</span><span class='id identifier rubyid_source_url'>source_url</span>    
  <span class='kw'>return</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id identifier rubyid_t'>t</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>unknown</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_baseurl'>baseurl</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_baseurl'>baseurl</span><span class='embexpr_end'>}</span><span class='tstring_content'>\/tree\/master\/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_jig'>jig</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>\/roles\/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="jig-instance_method">
  
    - (<tt>Object</tt>) <strong>jig</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


192
193
194</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rails/app/models/role.rb', line 192</span>

<span class='kw'>def</span> <span class='id identifier rubyid_jig'>jig</span>
  <span class='const'>Jig</span><span class='period'>.</span><span class='id identifier rubyid_find_by'>find_by</span><span class='lparen'>(</span><span class='label'>name:</span> <span class='id identifier rubyid_jig_name'>jig_name</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="name_i18n-instance_method">
  
    - (<tt>Object</tt>) <strong>name_i18n</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


136
137
138</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rails/app/models/role.rb', line 136</span>

<span class='kw'>def</span> <span class='id identifier rubyid_name_i18n'>name_i18n</span>
  <span class='const'>I18n</span><span class='period'>.</span><span class='id identifier rubyid_t'>t</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='symbol'>:default</span><span class='op'>=&gt;</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='symbol'>:scope</span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>common.roles</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="name_safe-instance_method">
  
    - (<tt>Object</tt>) <strong>name_safe</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


140
141
142</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rails/app/models/role.rb', line 140</span>

<span class='kw'>def</span> <span class='id identifier rubyid_name_safe'>name_safe</span>
  <span class='id identifier rubyid_name_i18n'>name_i18n</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;#8209;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;nbsp;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="noop?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>noop?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


132
133
134</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rails/app/models/role.rb', line 132</span>

<span class='kw'>def</span> <span class='id identifier rubyid_noop?'>noop?</span>
  <span class='id identifier rubyid_jig'>jig</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_eql?'>eql?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>noop</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="on_active-instance_method">
  
    - (<tt>Object</tt>) <strong>on_active</strong>(node_role, *args) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


82
83
84</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rails/app/models/role.rb', line 82</span>

<span class='kw'>def</span> <span class='id identifier rubyid_on_active'>on_active</span><span class='lparen'>(</span><span class='id identifier rubyid_node_role'>node_role</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No override for </span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='embexpr_end'>}</span><span class='tstring_content'>.on_active event: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_node_role'>node_role</span><span class='period'>.</span><span class='id identifier rubyid_role'>role</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> on </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_node_role'>node_role</span><span class='period'>.</span><span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="on_blocked-instance_method">
  
    - (<tt>Object</tt>) <strong>on_blocked</strong>(node_role, *args) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


94
95
96</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rails/app/models/role.rb', line 94</span>

<span class='kw'>def</span> <span class='id identifier rubyid_on_blocked'>on_blocked</span><span class='lparen'>(</span><span class='id identifier rubyid_node_role'>node_role</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No override for </span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='embexpr_end'>}</span><span class='tstring_content'>.on_blocked event: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_node_role'>node_role</span><span class='period'>.</span><span class='id identifier rubyid_role'>role</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> on </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_node_role'>node_role</span><span class='period'>.</span><span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="on_deployment_create-instance_method">
  
    - (<tt>Object</tt>) <strong>on_deployment_create</strong>(dr) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Event hook that is called whenever a new deployment role is bound to a
deployment. Roles that need do something on a per-deployment basis should
override this</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


123
124
125</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rails/app/models/role.rb', line 123</span>

<span class='kw'>def</span> <span class='id identifier rubyid_on_deployment_create'>on_deployment_create</span><span class='lparen'>(</span><span class='id identifier rubyid_dr'>dr</span><span class='rparen'>)</span>
  <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="on_deployment_delete-instance_method">
  
    - (<tt>Object</tt>) <strong>on_deployment_delete</strong>(dr) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Event hook that is called whenever a deployment role is deleted from a
deployment.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


128
129
130</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rails/app/models/role.rb', line 128</span>

<span class='kw'>def</span> <span class='id identifier rubyid_on_deployment_delete'>on_deployment_delete</span><span class='lparen'>(</span><span class='id identifier rubyid_dr'>dr</span><span class='rparen'>)</span>
  <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="on_error-instance_method">
  
    - (<tt>Object</tt>) <strong>on_error</strong>(node_role, *args) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>State Transistion Overrides</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


78
79
80</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rails/app/models/role.rb', line 78</span>

<span class='kw'>def</span> <span class='id identifier rubyid_on_error'>on_error</span><span class='lparen'>(</span><span class='id identifier rubyid_node_role'>node_role</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No override for </span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='embexpr_end'>}</span><span class='tstring_content'>.on_error event: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_node_role'>node_role</span><span class='period'>.</span><span class='id identifier rubyid_role'>role</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> on </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_node_role'>node_role</span><span class='period'>.</span><span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="on_node_change-instance_method">
  
    - (<tt>Object</tt>) <strong>on_node_change</strong>(node) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Event hook that will be called every time a node is saved if any attributes
changed. Roles that are interested in watching nodes to see what has
changed should implement this hook.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


117
118
119</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rails/app/models/role.rb', line 117</span>

<span class='kw'>def</span> <span class='id identifier rubyid_on_node_change'>on_node_change</span><span class='lparen'>(</span><span class='id identifier rubyid_node'>node</span><span class='rparen'>)</span>
  <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="on_node_create-instance_method">
  
    - (<tt>Object</tt>) <strong>on_node_create</strong>(node) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Event triggers for node creation and destruction. roles should override if
they want to handle node addition</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


104
105
106</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rails/app/models/role.rb', line 104</span>

<span class='kw'>def</span> <span class='id identifier rubyid_on_node_create'>on_node_create</span><span class='lparen'>(</span><span class='id identifier rubyid_node'>node</span><span class='rparen'>)</span>
  <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="on_node_delete-instance_method">
  
    - (<tt>Object</tt>) <strong>on_node_delete</strong>(node) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Event triggers for node creation and destruction. roles should override if
they want to handle node destruction</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


110
111
112</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rails/app/models/role.rb', line 110</span>

<span class='kw'>def</span> <span class='id identifier rubyid_on_node_delete'>on_node_delete</span><span class='lparen'>(</span><span class='id identifier rubyid_node'>node</span><span class='rparen'>)</span>
  <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="on_proposed-instance_method">
  
    - (<tt>Object</tt>) <strong>on_proposed</strong>(node_role, *args) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


98
99
100</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rails/app/models/role.rb', line 98</span>

<span class='kw'>def</span> <span class='id identifier rubyid_on_proposed'>on_proposed</span><span class='lparen'>(</span><span class='id identifier rubyid_node_role'>node_role</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No override for </span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='embexpr_end'>}</span><span class='tstring_content'>.on_proposed event: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_node_role'>node_role</span><span class='period'>.</span><span class='id identifier rubyid_role'>role</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> on </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_node_role'>node_role</span><span class='period'>.</span><span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="on_todo-instance_method">
  
    - (<tt>Object</tt>) <strong>on_todo</strong>(node_role, *args) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


86
87
88</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rails/app/models/role.rb', line 86</span>

<span class='kw'>def</span> <span class='id identifier rubyid_on_todo'>on_todo</span><span class='lparen'>(</span><span class='id identifier rubyid_node_role'>node_role</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No override for </span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='embexpr_end'>}</span><span class='tstring_content'>.on_todo event: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_node_role'>node_role</span><span class='period'>.</span><span class='id identifier rubyid_role'>role</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> on </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_node_role'>node_role</span><span class='period'>.</span><span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="on_transition-instance_method">
  
    - (<tt>Object</tt>) <strong>on_transition</strong>(node_role, *args) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


90
91
92</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rails/app/models/role.rb', line 90</span>

<span class='kw'>def</span> <span class='id identifier rubyid_on_transition'>on_transition</span><span class='lparen'>(</span><span class='id identifier rubyid_node_role'>node_role</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No override for </span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='embexpr_end'>}</span><span class='tstring_content'>.on_transition event: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_node_role'>node_role</span><span class='period'>.</span><span class='id identifier rubyid_role'>role</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> on </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_node_role'>node_role</span><span class='period'>.</span><span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="template_update-instance_method">
  
    - (<tt>Object</tt>) <strong>template_update</strong>(val) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>incremental update (merges with existing)</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


70
71
72
73
74</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rails/app/models/role.rb', line 70</span>

<span class='kw'>def</span> <span class='id identifier rubyid_template_update'>template_update</span><span class='lparen'>(</span><span class='id identifier rubyid_val'>val</span><span class='rparen'>)</span>
  <span class='const'>Role</span><span class='period'>.</span><span class='id identifier rubyid_transaction'>transaction</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_update!'>update!</span><span class='lparen'>(</span><span class='label'>template:</span> <span class='id identifier rubyid_template'>template</span><span class='period'>.</span><span class='id identifier rubyid_deep_merge'>deep_merge</span><span class='lparen'>(</span><span class='id identifier rubyid_val'>val</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="unresolved_requires-instance_method">
  
    - (<tt>Object</tt>) <strong>unresolved_requires</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


57
58
59</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rails/app/models/role.rb', line 57</span>

<span class='kw'>def</span> <span class='id identifier rubyid_unresolved_requires'>unresolved_requires</span>
  <span class='const'>RoleRequire</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>role_id in (select role_id from all_role_requires where required_role_id IS NULL AND role_id = ?)</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_cohort-instance_method">
  
    - (<tt>Object</tt>) <strong>update_cohort</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


152
153
154
155
156
157
158
159
160
161
162</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rails/app/models/role.rb', line 152</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update_cohort'>update_cohort</span>
  <span class='const'>Role</span><span class='period'>.</span><span class='id identifier rubyid_transaction'>transaction</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_c'>c</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_parents'>parents</span><span class='period'>.</span><span class='id identifier rubyid_maximum'>maximum</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cohort</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>||</span> <span class='op'>-</span><span class='int'>1</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_c'>c</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_cohort'>cohort</span>
      <span class='id identifier rubyid_update_column'>update_column</span><span class='lparen'>(</span><span class='symbol'>:cohort</span><span class='comma'>,</span>  <span class='id identifier rubyid_c'>c</span> <span class='op'>+</span> <span class='int'>1</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_children'>children</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cohort &lt;= ?</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span><span class='id identifier rubyid_cohort'>cohort</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_child'>child</span><span class='op'>|</span>
    <span class='id identifier rubyid_child'>child</span><span class='period'>.</span><span class='id identifier rubyid_update_cohort'>update_cohort</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Fri Mar 13 01:25:13 2015 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.6 (ruby-2.1.5).
</div>

  </body>
</html>